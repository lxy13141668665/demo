<!-- //鼠标标记位置 -->
<!-- <!DOCTYPE html>
<html>

<head>
    <style>
        #map {
            width: 500px;
            height: 300px;
            background-color: #f0f0f0;
            position: relative;
        }

        .marker {
            width: 20px;
            height: 20px;
            background-color: red;
            border-radius: 50%;
            position: absolute;
            transform: translate(-50%, -50%);
        }
    </style>
</head>

<body>

    <div id="map"></div>
    <button id="undoButton">撤销</button>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const map = document.getElementById("map");
            const undoButton = document.getElementById("undoButton");
            const markers = [];

            map.addEventListener("click", function (event) {
                const marker = document.createElement("div");
                marker.className = "marker";
                marker.style.left = (event.clientX - map.getBoundingClientRect().left) + "px";
                marker.style.top = (event.clientY - map.getBoundingClientRect().top) + "px";
                map.appendChild(marker);
                markers.push(marker);
            });

            undoButton.addEventListener("click", function () {
                if (markers.length > 0) {
                    const lastMarker = markers.pop();
                    map.removeChild(lastMarker);
                }
            });
        });
    </script>

</body>

</html> -->
<!-- //鼠标标记位置、撤销、并保存为base64的图片 -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>标记位置</title>
</head>

<body>
    <canvas id="canvas" width="800" height="600" style="border: 1px solid black;"></canvas>
    <button id="markButton">标记位置</button>
    <button id="undoButton">撤销</button>
    <button id="saveButton">保存为Base64图片</button>

    <script>
        const canvas = document.getElementById("canvas");
        const context = canvas.getContext("2d");
        const markButton = document.getElementById("markButton");
        const undoButton = document.getElementById("undoButton");
        const saveButton = document.getElementById("saveButton");
        let marks = [];
        let isMarking = false;

        // 监听鼠标点击事件
        canvas.addEventListener("mousedown", (e) => {
            if (isMarking) {
                marks.push({ x: e.clientX - canvas.getBoundingClientRect().left, y: e.clientY - canvas.getBoundingClientRect().top });
                drawMarks();
            }
        });

        // 标记按钮点击事件
        markButton.addEventListener("click", () => {
            isMarking = true;
        });

        // 撤销按钮点击事件
        undoButton.addEventListener("click", () => {
            marks.pop();
            drawMarks();
        });

        // 保存按钮点击事件
        saveButton.addEventListener("click", () => {
            const base64Image = canvas.toDataURL();
            console.log(base64Image); // 在控制台中显示base64图像数据
        });

        // 绘制标记点
        function drawMarks() {
            context.clearRect(0, 0, canvas.width, canvas.height);
            marks.forEach((mark) => {
                context.beginPath();
                context.arc(mark.x, mark.y, 5, 0, 2 * Math.PI);
                context.fillStyle = "red";
                context.fill();
            });
        }
    </script>
</body>

</html>
<!-- js将dom保存为一个base64的图片 -->
<!-- <!DOCTYPE html>
<html>

<head>
    <title>保存DOM为Base64图像</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>

<body>
    <div id="element-to-save">
        <p>这是一个要保存的段落。</p>

    </div>
    <button id="save-button">保存为Base64图像</button>
    <img id="result-image" style="display: none;">

    <script>
        const elementToSave = document.getElementById('element-to-save');
        const saveButton = document.getElementById('save-button');
        const resultImage = document.getElementById('result-image');

        saveButton.addEventListener('click', () => {
            html2canvas(elementToSave).then(canvas => {
                const base64Image = canvas.toDataURL('image/png');
                resultImage.src = base64Image;
                resultImage.style.display = 'block';
            });
        });
    </script>
</body>

</html> -->