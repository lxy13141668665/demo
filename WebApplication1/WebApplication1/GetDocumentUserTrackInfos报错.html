<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dcwriter</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        body {
            height: 100vh;
            overflow: hidden;
        }

        #tools {
            height: 60px;
            padding: 5px;
        }

        #myWriterControl {
            width: 100%;
            height: calc(100% - 60px);
            border: 1px solid black;
            border-radius: 5px;
        }
    </style>
</head>

<body>
    <div id="tools">
        <input type="button" name="name" value="编辑器打开本地文件"
            onclick="document.getElementById('myWriterControl').DCExecuteCommand('fileopen', true, null)" />
        <input type="button" value="GetDocumentUserTrackInfos" onclick="GetDocumentUserTrackInfos()">
    </div>
    <div id="myWriterControl" contentrendermode="NormalHtmlEditable" workspacebackcolorstring="#fff"
        WorkspaceBackColor="#c6c6c6" AutoBuildWebWriterControl="true" workspacebackgroundimage=""
        servicepageurl="emrServiceUrl" useclassattribute="true" heightcompress="true" backgroundtextoutputmode="None"
        imagedataembedinhtml="true" serversleepfordebug="0" allowcopy="true" supportactivex="false" pixelpagespacing="5"
        clientcontextmenutype="Custom" showdebuginfo="false" HeaderFooterEditable="true" registercodeindex="0"
        PageBackColor="#fff">
    </div>
</body>
<script src="jquery-1.7.2.min.js"></script>
<script src="ServicePage.aspx?js=1&nojq=1"></script>
<script>
    var ctl = document.getElementById("myWriterControl");
    var servicepageurl = "http://192.158.10.8:6789/ServicePage.aspx";
    var servicepageurl = "ServicePage.aspx";
    function Build() {
        if (ctl) {
            ctl.setAttribute("servicepageurl", servicepageurl);
            BindingDCWriterClientControl(ctl);
             ctl.Options.LogUserEditTrack = "true";
             //启用文档内容安全和权限控制
             ctl.DocumentOptions.SecurityOptions.EnablePermission = "true";
             //执行逻辑删除
             ctl.DocumentOptions.SecurityOptions.EnableLogicDelete = "true";
             if (true) {
                 //当前用户编号。当LogUserEditTrack属性值等于true时该属性才有效。
                 ctl.Options.CurrentUserID = "45634663";
                 //当前用户名。当LogUserEditTrack属性值等于true时该属性才有效。
                 ctl.Options.CurrentUserName = "33434";
                 //操作的客户端电脑名称。可以为客户端机器名称或IP地址。当LogUserEditTrack属性值等于true时该属性才有效。
                 ctl.Options.ClientMachineName = "33333";
             }
             //输出内容不包含被逻辑删除的内容。
             ctl.Options.ExcludeLogicDeleted = true;
             //显示被逻辑删除的元素
             ctl.DocumentOptions.SecurityOptions.ShowLogicDeletedContent = false;
             //是否显示授权标记
             ctl.DocumentOptions.SecurityOptions.ShowPermissionMark = false;
             //是否显示授权相关的提示信息
            // ctl.DocumentOptions.SecurityOptions.ShowPermissionTip = false;
            ctl.Options.TransformUseBase64 = true;
            // ctl.Options.FormView = "Strict";
            ctl.BuildFrame(function () {
                // ctl.LoadDocumentFromFile("File/出院记录（翼状胬肉）.xml");
                // ctl.LoadDocumentFromString(saveString, "xml");
            });
        }
    }
    function GetDocumentUserTrackInfos() {
        var _list = ctl.GetDocumentUserTrackInfos(true);
        console.log("GetDocumentUserTrackInfos -> _list", _list)
    }
    Build();

</script>

</html>